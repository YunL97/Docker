# Docker

* 도커와 쿠버네티스를 이용해서 복잡한 어플리케이션을 더쉽게 관리, 배포, 개발 가능
* 도커: 컨테이너 기술
* 컨테이너에 다양한 상품을 넣을 수 있지만 그 후에는 자체적으로 보관 격리 -> 한 컨테이너의 상품은 다른 컨테이너의 상품과 섞이지 않는다
* 도커는 컨테이너를 구축하기 위한 도구, 컨테이너의 생성, 관리 프로세스를 단순화하는 도구
* 컨테이너를 만들면 작업이 아주 간편해진다
* 특정 버전을 컨테이너에 고정해서 코드가 항상 정확한 버전으로 실행이가능하다
* 컨테이너는 운영체제가 존재하지만 하나의 머신에 몇대의 머신을 설치하지 않음 -> 그대신 운영체제가 기본적으로 내재하고 있거나 컨테이너 에뮬레이트를 지원하는 내장 컨테이너를 활용 -> 고커가 이것이 작동하도록 처리 -> 그위에 도커 엔진이라는 도구를 실행하고 우리가 설치할때 도커에 의해 모두 설정된다
* 컨테이너는 버츄얼 머신에 설치하는것보다 훨씬 작은 운영체제의 매우 가벼운 버전
* 컨테이너: 애플리케이션, 웹사이트, 노드서버 ,전체환경 등 무엇이든 포함하는 작은 패키지
* 이미지: 컨테이너의 청사진, 실제로 코드와 코드를 실행하는데 필요한 도구, 이미지는 모든 설정 명령과 모든 코드가 포함된 공유 가능한 패키지, 컨테이너는 그러한 이미지의 구체적인 실행 인스턴스
* 이미지를 기반으로 여러 컨테이너를 만들 수 있다
```
//Dockerfile에서

WORKDIR /app // 앞으로의 모든 명령이 app 폴더에서 실행되게하는 설정

COPY . /app // 처음 .은 외부, /app은 도커 컨테이너 내부 app 폴더에 복사가 된다는 뜻, app폴더가 존재하지 않는 경우에는 이미지와 컨테이너에 생성된다
```
* build를 통해 도커 이미지를 만들 수 있음
* RUN npm install 전에 COPY package.json을 해줘서 package.json이 변경되지 않으면 npm install을 안해줘도 되기 때문에 npm install의 캐시된 결과를 사용할 수 있기 때문에 속도가 빠르다
* 도커로 할수있는 중요한 한가지는 중지된 컨테이너를 다시 시작가능
* attached모드: 컨테이너의 출력 결과를 터미널로 수신, docker run
* detached모드: 수신x, docker start, start -a 플래그를 추가하면 attached모드로 바로 시작 가능
* 컨테이너와 터미널로 상호작용을 해야하는경우 -i -t 플래그를 이용하여 상호작용 가능하다 줄여서 -it
* 레이어: 이미지와 컨테이너의 핵심적인 부분, 레이어 시스템 덕분에 도커는 빠르고 효율적인 이미지 관리와 컨테이너 생성을 제공
  * 이미지 레이어: 도커 이미지는 여러 레이어로 구성, 하나의 레이어는 운영체제, 다른 레이어는 소프트웨어, 라이브러리를 포함가능, 이레이어 들이 순차적으로 쌓여서 완전한 이미지를 형성
  * 효율성:레이어 방식은 저장공간을 효율적으로 사용, 동일한 레이어를 공유하는 여러 이미지는 동일한 레이어를 다시 다운로드하거나 저장할 필요가 없음
  * 컨테이너레이어: 컨테이너가 실행될때 도커는 읽기전용의 이미지 레이어 위에 쓰기 가능한 레이어를 추가, 이 레이어는 컨테이너의 생명주기 동안 발생하는 모든 변경사항을 저장

* 팀 구성원과 공유하거나 나중에 배포를 위해 공유하는 경우 일반적으로 로우 도커파일이 아닌 완성된 이미지로 작업한다
* 도커허브: 깃허브같은거
* 도커허브를이용해서 docker push, docker pull 을해서 다른사람들과 공유 가능하다
* push 할때는 로그인이 필요한데 pull 할때는 필요없음
* 